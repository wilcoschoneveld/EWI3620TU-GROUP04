<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>Font.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCoverage analysis of project &quot;EWI3620TU-GROUP04&quot; (powered by JaCoCo from EclEmma)</a> &gt; <a href="index.source.html" class="el_package">patient04.resources</a> &gt; <span class="el_source">Font.java</span></div><h1>Font.java</h1><pre class="source lang-java linenums">package patient04.resources;
import java.util.HashMap;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.GL11;
import org.newdawn.slick.Color;
import org.newdawn.slick.TrueTypeFont;
import org.newdawn.slick.opengl.TextureImpl;

/**
 *
 * @author Wilco
 */
public class Font {
    // Static resource managing variables
<span class="nc" id="L15">    private static final HashMap&lt;java.awt.Font, Font&gt; fonts = new HashMap&lt;&gt;();</span>
    
    // Static style variables
    public static final int BOLD = java.awt.Font.BOLD;
    public static final int ITALIC = java.awt.Font.ITALIC;
    
    // Static alignment enumeration
<span class="nc" id="L22">    public static enum Align {</span>
<span class="nc" id="L23">        LEFT, RIGHT, TOP, BOTTOM, CENTER;</span>
    }
    
    private final TrueTypeFont font;
    private Color color;
    
    /** Font constructor
     * 
     * @param font 
     */
<span class="nc" id="L33">    public Font(TrueTypeFont font) {</span>
<span class="nc" id="L34">        this.font = font;</span>
<span class="nc" id="L35">        color = Color.white;</span>
<span class="nc" id="L36">    }</span>
    
    public void setColor(float r, float g, float b, float a) {
<span class="nc" id="L39">        color = new Color(r, g, b, a);</span>
<span class="nc" id="L40">    }</span>
    
    public void drawCentered(float y, String str) {
<span class="nc" id="L43">        int width = Display.getWidth(), height = Display.getHeight();</span>
        
<span class="nc" id="L45">        GL11.glMatrixMode(GL11.GL_MODELVIEW);</span>
<span class="nc" id="L46">        GL11.glPushMatrix();</span>
<span class="nc" id="L47">        GL11.glLoadIdentity();</span>
<span class="nc" id="L48">        GL11.glMatrixMode(GL11.GL_PROJECTION);</span>
<span class="nc" id="L49">        GL11.glPushMatrix();</span>
<span class="nc" id="L50">        GL11.glLoadIdentity();</span>
<span class="nc" id="L51">        GL11.glOrtho(0, width, height, 0, -1, 1);</span>
        
<span class="nc" id="L53">        Texture.unbind();</span>
<span class="nc" id="L54">        TextureImpl.unbind();</span>
        
<span class="nc" id="L56">        GL11.glEnable(GL11.GL_BLEND);</span>
<span class="nc" id="L57">        GL11.glBlendFunc(GL11.GL_SRC_ALPHA, GL11.GL_ONE_MINUS_SRC_ALPHA);</span>

<span class="nc" id="L59">        font.drawString(</span>
                width / 2 - font.getWidth(str) / 2, y * height, str, color);
        
<span class="nc" id="L62">        GL11.glMatrixMode(GL11.GL_MODELVIEW);</span>
<span class="nc" id="L63">        GL11.glPopMatrix();</span>
<span class="nc" id="L64">        GL11.glMatrixMode(GL11.GL_PROJECTION);</span>
<span class="nc" id="L65">        GL11.glPopMatrix();</span>
<span class="nc" id="L66">    }</span>
    
    public void draw(float x, float y, String str) {
<span class="nc" id="L69">        draw(x, y, str, 0);</span>
<span class="nc" id="L70">    }</span>
    
    public void draw(float x, float y, String str, int lineskip) {
<span class="nc" id="L73">        draw(x, y, str, lineskip, Align.LEFT, Align.TOP);</span>
<span class="nc" id="L74">    }</span>
    
    public void draw(float x, float y, String str, int lineskip,
                                           Align horizontal, Align vertical) {
        
<span class="nc" id="L79">        int width = Display.getWidth(), height = Display.getHeight();</span>
        
<span class="nc" id="L81">        GL11.glMatrixMode(GL11.GL_MODELVIEW);</span>
<span class="nc" id="L82">        GL11.glPushMatrix();</span>
<span class="nc" id="L83">        GL11.glLoadIdentity();</span>
<span class="nc" id="L84">        GL11.glMatrixMode(GL11.GL_PROJECTION);</span>
<span class="nc" id="L85">        GL11.glPushMatrix();</span>
<span class="nc" id="L86">        GL11.glLoadIdentity();</span>
<span class="nc" id="L87">        GL11.glOrtho(0, width, height, 0, -1, 1);</span>
        
<span class="nc" id="L89">        float tx = x * width,</span>
<span class="nc" id="L90">              ty = y * height + lineskip * font.getHeight();</span>
        
<span class="nc bnc" id="L92" title="All 3 branches missed.">        switch(horizontal) {</span>
<span class="nc" id="L93">            case CENTER: tx -= font.getWidth(str) / 2f; break;</span>
<span class="nc" id="L94">            case RIGHT: tx -= font.getWidth(str); break;</span>
        }
        
<span class="nc bnc" id="L97" title="All 3 branches missed.">        switch(vertical) {</span>
<span class="nc" id="L98">            case CENTER: ty -= font.getHeight() / 2f; break;</span>
<span class="nc" id="L99">            case BOTTOM: ty -= font.getHeight(); break;</span>
        }
        
<span class="nc" id="L102">        Texture.unbind();</span>
<span class="nc" id="L103">        TextureImpl.unbind();</span>
        
<span class="nc" id="L105">        GL11.glEnable(GL11.GL_BLEND);</span>
<span class="nc" id="L106">        GL11.glBlendFunc(GL11.GL_SRC_ALPHA, GL11.GL_ONE_MINUS_SRC_ALPHA);</span>
        
<span class="nc" id="L108">        font.drawString(tx, ty, str, color);</span>
        
<span class="nc" id="L110">        GL11.glMatrixMode(GL11.GL_MODELVIEW);</span>
<span class="nc" id="L111">        GL11.glPopMatrix();</span>
<span class="nc" id="L112">        GL11.glMatrixMode(GL11.GL_PROJECTION);</span>
<span class="nc" id="L113">        GL11.glPopMatrix();</span>
<span class="nc" id="L114">    }</span>
    
    public static Font getResource(java.awt.Font jFont) {
        // Check if TrueTypeFont was already created
<span class="nc" id="L118">        Font font = fonts.get(jFont);</span>

        // If font does not exist
<span class="nc bnc" id="L121" title="All 2 branches missed.">        if (font == null) {</span>
            // Create a new TTF
<span class="nc" id="L123">            font = new Font(new TrueTypeFont(jFont, true));</span>
            
            // Store loaded TTF
<span class="nc" id="L126">            fonts.put(jFont, font);</span>
        }

        // Return font
<span class="nc" id="L130">        return font;</span>
    }
    
    public static Font getResource(String fontName, int style, int size) {
        // Create a new font from given attributes
<span class="nc" id="L135">        java.awt.Font jFont = new java.awt.Font(fontName, style, size);</span>
        
        // Get resource from font
<span class="nc" id="L138">        return getResource(jFont);</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312101107</span></div></body></html>